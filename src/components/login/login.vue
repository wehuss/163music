<template>
  <div class="login">
    <div class="logo">
      <svg
        t="1584325868362"
        class="icon"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="4130"
        width="60"
        height="60"
      >
        <path
          d="M623.61751703 18.30760297c26.82121482-7.73082075 55.55996445-7.34245925 82.64817779-1.11653927 31.10532741 7.39100445 60.53584592 21.67542518 85.86429629 41.14204445 9.24785778 7.02691555 17.59762963 15.76504889 21.84533334 26.76053333 6.57787259 16.26263703 4.81810963 35.7049837-4.89092742 50.35349334-8.47113482 13.15574518-22.87691852 22.31864889-38.39924148 24.28472888-12.40329482 1.69908148-25.40126815-0.93449482-36.0569363-7.5245037-6.00746667-3.53166222-10.58285037-8.98085925-16.61458962-12.47611259-16.17768297-10.26730667-34.80689778-18.35008-54.28565333-17.88890074-13.71401482 0.15777185-25.77749333 8.192-35.0738963 17.63403851-8.70172445 8.98085925-13.13147259 22.22155852-10.25517037 34.53989927 6.68709925 25.17067852 13.33778963 50.34135703 20.01275259 75.51203555 47.98691555 2.46366815 95.94955852 15.15823408 137.20082963 40.20754963 40.09832297 24.80658963 76.32516741 56.26386963 105.05178074 93.75288889 24.38181925 31.7728237 42.86539852 68.06034963 54.17642666 106.4838637 12.24552297 41.40904297 16.21409185 85.07543703 13.02224593 128.08647111-2.65784889 35.48653037-9.63621925 70.7667437-21.67542518 104.29933037-31.1296 81.65300148-88.7891437 153.24501333-163.00259555 199.64207408-54.43128889 34.38212741-116.94535111 55.12305778-180.69731556 63.03592297-44.00621037 5.49774222-88.84982518 5.52201482-132.63758222-1.9782163-89.97850075-14.86696297-174.30148741-59.71057778-238.29617778-124.48199112-63.59419259-63.71555555-107.85526518-146.41227852-125.75630222-234.6310163-13.20429037-64.33450667-12.60961185-131.50890667 2.03889778-195.55214221 17.90103703-78.97088 57.46536297-152.84451555 113.08600888-211.66914371 45.36547555-48.30245925 101.39875555-86.5196563 162.90550519-111.19274666 6.33514667-2.41512297 12.57320297-5.27928889 19.3209837-6.34728297 14.4057837-2.52434963 29.79460741 0.88594963 41.59108741 9.57553777 15.97136592 11.27461925 24.75804445 31.72427852 22.10019555 51.06953483-2.19666963 19.74575408-16.21409185 37.54970075-34.89185185 44.30961777-62.13783703 23.22887111-117.23662222 64.73500445-156.89803851 117.87984593-35.45012148 47.16164741-58.58190222 103.49833482-66.33699557 162.00741925-7.82791111 57.91440592-0.86167703 117.72207408 19.89138964 172.33540742 29.97665185 79.84469333 89.57800297 148.54826667 165.56335408 187.65141333 45.75383703 23.70218667 97.26027852 36.08120889 148.77885628 35.7292563 42.37994667-0.54613333 84.89339259-7.35459555 124.72471705-22.08805926 35.02535111-13.01010963 67.85403259-32.22186667 95.76751407-57.12554667 26.02021925-23.05896297 47.67137185-50.92389925 64.18887111-81.49522963 8.27695408-15.59514075 15.92282075-31.65146075 20.59529482-48.72722963 13.78683259-48.8121837 16.17768297-101.71429925 1.43208295-150.59930074-12.19697778-40.99640889-37.29483852-77.53879703-69.34679703-105.61005037-14.17519408-12.40329482-29.32129185-23.77500445-45.5596563-33.33840593-14.34510222-8.05850075-30.01306075-13.54410667-45.99656295-17.29422222 11.14112 43.5693037 23.05896297 86.95656297 34.35785481 130.48945778 1.91753482 10.43721482 3.83506963 20.87442963 5.63124147 31.33591704 1.6505363 44.91643259-14.1023763 90.16054518-43.07171555 124.5184-26.99112297 32.37963852-65.31754667 55.15946667-106.77513481 62.98737777-44.68584297 8.90804148-92.73344 0.49758815-131.10840889-24.27259259-36.63947852-23.22887111-63.70341925-60.01398518-77.9757037-100.73125926-8.08277333-22.77982815-12.1120237-46.8703763-12.91301927-70.99733334-2.45153185-52.48948148 11.27461925-106.11977482 41.2998163-149.53130666 35.28021333-51.80984889 90.90085925-87.42987852 150.53861926-104.80905482-4.39333925-16.79663408-8.88376889-33.56899555-13.32565334-50.36562963-11.51734518-36.25111703-9.06581333-76.95625482 8.11918223-111.03497481 9.27213037-19.0175763 23.05896297-35.58362075 39.0060563-49.35831703 17.75540148-15.18250667 38.48419555-27.17316741 61.08197925-33.38695111M481.22235259 413.16200297c-15.99563852 16.79663408-27.2095763 38.03515259-32.03982222 60.70575406-4.34479408 20.58315852-4.36906667 42.04013037-0.46117926 62.68397038 4.76956445 22.80410075 16.54177185 45.11061333 36.0569363 58.56976592 15.14609778 10.75275852 34.86757925 14.01742222 52.93852444 10.48576 33.4354963-5.87396741 60.71789037-36.63947852 61.65238518-70.68178963-1.27431111-8.43472592-2.66998518-16.86945185-5.04869925-25.07358815-12.48824889-47.23446518-25.08572445-94.43252148-37.50115556-141.69125925-28.25329778 8.71386075-55.14733037 23.39877925-75.59698963 45.00138667z"
          fill="#ffffff"
          p-id="4131"
        ></path>
      </svg>
      <h2>相信音乐的力量</h2>
    </div>
    <div class="login-content">
      <van-form @submit="onSubmit">
        <van-field
          v-model="phone"
          name="phone"
          label="手机号"
          placeholder="手机号"
          :rules="[{ required: true, message: '请填写手机号' }]"
        />
        <van-field
          v-model="password"
          type="password"
          name="password"
          label="密码"
          placeholder="密码"
          :rules="[{ required: true, message: '请填写密码' }]"
        />
        <div class="submit">
          <van-button round block :color="'#FF6600'" native-type="submit">
            登录
          </van-button>
        </div>
      </van-form>
      <div class="more">
        <van-button
          round
          type="default"
          class="registered"
          @click="notify(false)"
        >
          注册</van-button
        >
        <div class="box"></div>
        <van-button round type="danger" class="forget" @click="notify(true)"
          >忘记密码</van-button
        >
      </div>
    </div>
    <span class="back" @click="back">
      <svg
        t="1584326421680"
        class="icon"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="5052"
        width="30"
        height="30"
      >
        <path
          d="M306.176 461.824c12.8 0 25.6 5.12 35.84 14.848L757.76 888.32c19.968 19.968 19.968 51.712 0.512 71.68s-51.712 19.968-71.68 0.512L270.848 548.864a50.842 50.842 0 0 1-0.512-71.68c9.216-10.752 22.528-15.36 35.84-15.36z"
          p-id="5053"
          fill="#ffffff"
        ></path>
        <path
          d="M717.312 46.08c12.8 0 25.6 5.12 35.84 14.848a50.837 50.837 0 0 1 0.512 71.68L342.016 548.352a50.842 50.842 0 0 1-71.68 0.512 50.842 50.842 0 0 1-0.512-71.68L681.472 61.44c9.728-10.24 23.04-15.36 35.84-15.36z"
          p-id="5054"
          fill="#ffffff"
        ></path>
      </svg>
    </span>
  </div>
</template>

<script>
import Vue from 'vue'
import { Form, Field, Button, Notify } from 'vant'
import { mapMutations } from 'vuex'

Vue.use(Field)
Vue.use(Form)
Vue.use(Button)
Vue.use(Notify)

export default {
  data () {
    return {
      phone: '',
      password: ''
    }
  },
  methods: {
    ...mapMutations({
      setLogin: 'SET_ISLOGIN'
    }),
    onSubmit (values) {
      // console.log(values)
      this.api.login(values).then(res => {
        console.log(res.code)
        if (res.code === 200) {
          this.setLogin(true)
          Notify({ type: 'success', message: '登陆成功' })
          this.$router.push({name: 'find'})
        }
      })
    },
    notify (isForget) {
      console.log(isForget)
      let message = isForget
        ? '暂时没有找回密码功能'
        : '安全起见，未实现注册功能'
      Notify({ type: 'warning', message })
    },
    back () {
      this.$router.go(-1)
    }
  }
}
</script>

<style lang="scss" scoped>
@import "../../assets/styles/style.scss";

.login {
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  background-color: $bgc;
  .login-content {
    width: 80%;
    margin: 0 auto;
    margin-top: 50%;
    .van-cell {
      margin-top: 30px;
      line-height: 0.8rem;
      border-radius: 40px;
    }
    .submit {
      display: flex;
      margin: 30px 0;
    }
    .van-button {
      height: 1rem;
    }
    .more {
      display: flex;
      justify-content: space-around;
      .registered {
        flex: 6;
      }
      .box {
        flex: 1;
      }
      .forget {
        flex: 3;
      }
    }
  }
  .logo {
    position: fixed;
    top: 15%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    color: #ffffff;
    font-size: 40px;
    h2 {
      margin-top: 20px;
    }
  }
  .back {
    position: fixed;
    top: 2%;
    left: 2%;
  }
}
</style>
